import{_ as f,o as a,c as i,a as p,F as c,j as h,n as m,t as _,k as g,p as v,h as L}from"./app-hBvoMyXQ.js";const k={name:"EditableTable",props:{columnList:{type:Array},dataList:{type:Array},update:{type:Function}},data(){return{editingId:""}},computed:{EmptyColumn(){const e={};for(let t of this.columnList)e[t.value]="";return e}},methods:{deleteData(e){const t=[...this.dataList];t.splice(e,1),this.update(t),this.editingId=""},handleFocus(e){const{index:t,inputtype:s}=e.target.dataset;this.editingId!==`${s}${t}`&&(this.editingId=`${s}${t}`),document.addEventListener("click",this.hideShadow)},hideShadow(e){this.$refs.editableTable.contains(e.target)||(this.editingId="",document.removeEventListener("click",this.hideShadow))},handleParamsChange(e){let{dataset:{index:t,inputtype:s},value:y}=e.target;t=+t;const r=[...this.dataList];if(t===r.length){const n={};for(let o of this.columnList)n[o.value]="";r.push(n)}r[t][s]=y,this.update(r)}}},w=e=>(v("data-v-1f09e679"),e=e(),L(),e),I={class:"editableTable",ref:"editableTable",border:"1"},C=w(()=>p("th",{style:{width:"32px","text-align":"center"}},null,-1)),E=["onClick"],S={key:1},F=["value","data-index","data-inputtype"],T={key:1,style:{"white-space":"pre-line"}};function D(e,t,s,y,r,n){return a(),i("table",I,[p("tbody",null,[p("tr",null,[C,(a(!0),i(c,null,h(s.columnList,(o,l)=>(a(),i("th",{style:m({width:o.width||"auto"}),key:l},_(o.title),5))),128))]),(a(!0),i(c,null,h(s.dataList.concat(n.EmptyColumn),(o,l)=>(a(),i("tr",{key:l},[l!==s.dataList.length?(a(),i("td",{key:0,class:"delete",onClick:d=>n.deleteData(l)},"-",8,E)):(a(),i("td",S)),(a(!0),i(c,null,h(s.columnList,(d,b)=>(a(),i("td",{class:g(r.editingId===`${d.value}${l}`&&(d.editable===void 0||d.editable)?"editing":""),key:`${l}_${b}`},[d.editable===void 0||d.editable?(a(),i("input",{key:0,value:o[d.value],"data-index":l,"data-inputtype":d.value,onFocus:t[0]||(t[0]=(...u)=>n.handleFocus&&n.handleFocus(...u)),onInput:t[1]||(t[1]=(...u)=>n.handleParamsChange&&n.handleParamsChange(...u))},null,40,F)):(a(),i("span",T,_(o[d.value]),1))],2))),128))]))),128))])],512)}const B=f(k,[["render",D],["__scopeId","data-v-1f09e679"],["__file","EditableTable.vue"]]);export{B as default};
