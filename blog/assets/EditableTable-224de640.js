import{_ as m,p as d,q as s,Q as c,O as h,P as _,x as b,v as g,w as v,ao as f,ap as L}from"./framework-e799b403.js";const k={name:"EditableTable",props:{columnList:{type:Array},dataList:{type:Array},update:{type:Function}},data(){return{editingId:""}},computed:{EmptyColumn(){const e={};for(let t of this.columnList)e[t.value]="";return e}},methods:{deleteData(e){const t=[...this.dataList];t.splice(e,1),this.update(t),this.editingId=""},handleFocus(e){const{index:t,inputtype:a}=e.target.dataset;this.editingId!==`${a}${t}`&&(this.editingId=`${a}${t}`),document.addEventListener("click",this.hideShadow)},hideShadow(e){this.$refs.editableTable.contains(e.target)||(this.editingId="",document.removeEventListener("click",this.hideShadow))},handleParamsChange(e){let{dataset:{index:t,inputtype:a},value:p}=e.target;t=+t;const i=[...this.dataList];t===i.length&&i.push({key:"",value:""}),i[t][a]=p,this.update(i)}}},I=e=>(f("data-v-c9d4644d"),e=e(),L(),e),w={class:"editableTable",ref:"editableTable",border:"1"},E=I(()=>c("th",{style:{width:"32px","text-align":"center"}},null,-1)),x={key:"index"},C=["onClick"],S={key:1},T=["value","data-index","data-inputtype"];function F(e,t,a,p,i,l){return d(),s("table",w,[c("tbody",null,[c("tr",null,[E,(d(!0),s(h,null,_(a.columnList,(o,n)=>(d(),s("th",{style:b({width:o.width||"auto"}),key:n},g(o.title),5))),128))]),(d(!0),s(h,null,_(a.dataList.concat(l.EmptyColumn),(o,n)=>(d(),s("tr",x,[n!==a.dataList.length?(d(),s("td",{key:0,class:"delete",onClick:u=>l.deleteData(n)},"-",8,C)):(d(),s("td",S)),(d(!0),s(h,null,_(a.columnList,(u,y)=>(d(),s("td",{class:v(i.editingId===`${u.value}${n}`?"editing":""),key:`${n}_${y}`},[c("input",{value:o[u.value],"data-index":n,"data-inputtype":u.value,onFocus:t[0]||(t[0]=(...r)=>l.handleFocus&&l.handleFocus(...r)),onInput:t[1]||(t[1]=(...r)=>l.handleParamsChange&&l.handleParamsChange(...r))},null,40,T)],2))),128))]))),128))])],512)}const P=m(k,[["render",F],["__scopeId","data-v-c9d4644d"],["__file","EditableTable.vue"]]);export{P as default};
