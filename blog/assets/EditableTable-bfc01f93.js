import{_ as m,p as a,q as i,Q as p,O as c,P as h,x as g,v as y,w as v,ao as f,ap as L}from"./framework-e799b403.js";const k={name:"EditableTable",props:{columnList:{type:Array},dataList:{type:Array},update:{type:Function}},data(){return{editingId:""}},computed:{EmptyColumn(){const t={};for(let e of this.columnList)t[e.value]="";return t}},methods:{deleteData(t){const e=[...this.dataList];e.splice(t,1),this.update(e),this.editingId=""},handleFocus(t){const{index:e,inputtype:s}=t.target.dataset;this.editingId!==`${s}${e}`&&(this.editingId=`${s}${e}`),document.addEventListener("click",this.hideShadow)},hideShadow(t){this.$refs.editableTable.contains(t.target)||(this.editingId="",document.removeEventListener("click",this.hideShadow))},handleParamsChange(t){let{dataset:{index:e,inputtype:s},value:_}=t.target;e=+e;const u=[...this.dataList];if(e===u.length){const d={};for(let l of this.columnList)d[l.value]="";u.push(d)}u[e][s]=_,this.update(u)}}},w=t=>(f("data-v-95475e64"),t=t(),L(),t),I={class:"editableTable",ref:"editableTable",border:"1"},E=w(()=>p("th",{style:{width:"32px","text-align":"center"}},null,-1)),x={key:"index"},C=["onClick"],S={key:1},T=["value","data-index","data-inputtype"],F={key:1,style:{"white-space":"pre-line"}};function D(t,e,s,_,u,d){return a(),i("table",I,[p("tbody",null,[p("tr",null,[E,(a(!0),i(c,null,h(s.columnList,(l,o)=>(a(),i("th",{style:g({width:l.width||"auto"}),key:o},y(l.title),5))),128))]),(a(!0),i(c,null,h(s.dataList.concat(d.EmptyColumn),(l,o)=>(a(),i("tr",x,[o!==s.dataList.length?(a(),i("td",{key:0,class:"delete",onClick:n=>d.deleteData(o)},"-",8,C)):(a(),i("td",S)),(a(!0),i(c,null,h(s.columnList,(n,b)=>(a(),i("td",{class:v(u.editingId===`${n.value}${o}`&&(n.editable===void 0||n.editable)?"editing":""),key:`${o}_${b}`},[n.editable===void 0||n.editable?(a(),i("input",{key:0,value:l[n.value],"data-index":o,"data-inputtype":n.value,onFocus:e[0]||(e[0]=(...r)=>d.handleFocus&&d.handleFocus(...r)),onInput:e[1]||(e[1]=(...r)=>d.handleParamsChange&&d.handleParamsChange(...r))},null,40,T)):(a(),i("span",F,y(l[n.value]),1))],2))),128))]))),128))])],512)}const B=m(k,[["render",D],["__scopeId","data-v-95475e64"],["__file","EditableTable.vue"]]);export{B as default};
