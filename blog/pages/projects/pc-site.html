<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.0">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="https://x0.ifengimg.com/ucms/2022_33/D05072A8C8874827A94FA1CFE94705666831224C_size1_w64_h64.png"><script type="text/javascript">
		(function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "kgh215uzer");
    </script><title>pc-site 说明 | sword</title><meta name="description" content="Sword-Desc">
    <link rel="preload" href="/blog/assets/style-hc4LoWX0.css" as="style"><link rel="stylesheet" href="/blog/assets/style-hc4LoWX0.css">
    <link rel="modulepreload" href="/blog/assets/app-rZSHgSAN.js"><link rel="modulepreload" href="/blog/assets/pc-site.html-jCGHCphh.js"><link rel="modulepreload" href="/blog/assets/pc-site.html-TG4JAE9e.js">
    <link rel="prefetch" href="/blog/assets/index.html-P_5Ov_Q4.js" as="script"><link rel="prefetch" href="/blog/assets/config.html-jPdwSgwT.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-FFAP0xXC.js" as="script"><link rel="prefetch" href="/blog/assets/desc.html-4nGCZP_7.js" as="script"><link rel="prefetch" href="/blog/assets/deploy.html-uI61mq6R.js" as="script"><link rel="prefetch" href="/blog/assets/fda.html-yeAfvPLM.js" as="script"><link rel="prefetch" href="/blog/assets/split.html-FZR65Uta.js" as="script"><link rel="prefetch" href="/blog/assets/desc.html-89Usx2Em.js" as="script"><link rel="prefetch" href="/blog/assets/howToAdd.html-8uVrKkNr.js" as="script"><link rel="prefetch" href="/blog/assets/optional.html-Fcz6JQ5l.js" as="script"><link rel="prefetch" href="/blog/assets/regexp.html-qZAc4ssJ.js" as="script"><link rel="prefetch" href="/blog/assets/copy.html-as5R2_Wx.js" as="script"><link rel="prefetch" href="/blog/assets/editableTable.html-CocfsEjN.js" as="script"><link rel="prefetch" href="/blog/assets/explain.html-Mfkt1kwv.js" as="script"><link rel="prefetch" href="/blog/assets/jsonviewer.html-DXAeIdXN.js" as="script"><link rel="prefetch" href="/blog/assets/labelInput.html-ERqi9wF7.js" as="script"><link rel="prefetch" href="/blog/assets/nametag.html-RPA9HDzs.js" as="script"><link rel="prefetch" href="/blog/assets/outlink.html-zsFRX-xT.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-6Yl8cQE3.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-oxMuEl3C.js" as="script"><link rel="prefetch" href="/blog/assets/config.html-3nKypKsW.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-rIKVhF4f.js" as="script"><link rel="prefetch" href="/blog/assets/desc.html-m4Fnj3iq.js" as="script"><link rel="prefetch" href="/blog/assets/deploy.html-NEcUfQKv.js" as="script"><link rel="prefetch" href="/blog/assets/fda.html-jGM9zxqF.js" as="script"><link rel="prefetch" href="/blog/assets/split.html-NBm6KGWk.js" as="script"><link rel="prefetch" href="/blog/assets/desc.html-M4qSGMFb.js" as="script"><link rel="prefetch" href="/blog/assets/howToAdd.html-FhuOqYDV.js" as="script"><link rel="prefetch" href="/blog/assets/optional.html-3nl7eOMc.js" as="script"><link rel="prefetch" href="/blog/assets/regexp.html-s0ojvG9v.js" as="script"><link rel="prefetch" href="/blog/assets/copy.html-nHt0cxGQ.js" as="script"><link rel="prefetch" href="/blog/assets/editableTable.html-nzY5IKKv.js" as="script"><link rel="prefetch" href="/blog/assets/explain.html-HCrL5kDu.js" as="script"><link rel="prefetch" href="/blog/assets/jsonviewer.html-fK5vA4U-.js" as="script"><link rel="prefetch" href="/blog/assets/labelInput.html-Nje0MBsL.js" as="script"><link rel="prefetch" href="/blog/assets/nametag.html-jHgnUbM3.js" as="script"><link rel="prefetch" href="/blog/assets/outlink.html-YnycofyI.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-lSDLcp31.js" as="script"><link rel="prefetch" href="/blog/assets/Contact-wSinFu1a.js" as="script"><link rel="prefetch" href="/blog/assets/Copy-0W9X-eBc.js" as="script"><link rel="prefetch" href="/blog/assets/EditableTable-P5Upeia-.js" as="script"><link rel="prefetch" href="/blog/assets/Explain-Lo_OOjtM.js" as="script"><link rel="prefetch" href="/blog/assets/Iframe-9nQ7d5Z0.js" as="script"><link rel="prefetch" href="/blog/assets/LabelInput-j-G3tOXu.js" as="script"><link rel="prefetch" href="/blog/assets/NameTag-eDjk6EQN.js" as="script"><link rel="prefetch" href="/blog/assets/Outlink-FQkMF9lG.js" as="script"><link rel="prefetch" href="/blog/assets/PartTitle-ZUIbxV7w.js" as="script"><link rel="prefetch" href="/blog/assets/RegExpTest-jn0Z5trQ.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog/" class=""><img class="logo" src="http://i1.letvimg.com/lc03_lemf/202301/17/16/18/cheems.jpg" alt="sword"><span class="site-name can-hide">sword</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/blog/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/pages/projects/pc-site" class="router-link-active" aria-label="项目"><!--[--><!--]--> 项目 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/pages/components/common/copy" class="" aria-label="组件"><!--[--><!--]--> 组件 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/pages/learn/regexp" class="" aria-label="学习笔记"><!--[--><!--]--> 学习笔记 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/ImSwordTooth" rel="noopener noreferrer" target="_blank" aria-label="github"><!--[--><!--]--> github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><!----><form class="search-box" role="search"><input type="search" placeholder="搜索..." autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/blog/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/pages/projects/pc-site" class="router-link-active" aria-label="项目"><!--[--><!--]--> 项目 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/pages/components/common/copy" class="" aria-label="组件"><!--[--><!--]--> 组件 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/pages/learn/regexp" class="" aria-label="学习笔记"><!--[--><!--]--> 学习笔记 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/ImSwordTooth" rel="noopener noreferrer" target="_blank" aria-label="github"><!--[--><!--]--> github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">项目 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/pages/projects/pc-site.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="pc-site 说明"><!--[--><!--]--> pc-site 说明 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/pages/projects/pc-site.html#技术栈" class="router-link-active router-link-exact-active sidebar-item" aria-label="技术栈"><!--[--><!--]--> 技术栈 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/pages/projects/pc-site.html#ssr" class="router-link-active router-link-exact-active sidebar-item" aria-label="SSR"><!--[--><!--]--> SSR <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/pages/projects/pc-site.html#其他亮点" class="router-link-active router-link-exact-active sidebar-item" aria-label="其他亮点"><!--[--><!--]--> 其他亮点 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/blog/pages/projects/deploy.html" class="sidebar-item" aria-label="可装配上线步骤的上线系统 - deploy"><!--[--><!--]--> 可装配上线步骤的上线系统 - deploy <!--[--><!--]--></a><!----></li><li><a href="/blog/pages/projects/fda.html" class="sidebar-item" aria-label="搭建系统 - fda"><!--[--><!--]--> 搭建系统 - fda <!--[--><!--]--></a><!----></li><li><a href="/blog/pages/projects/split.html" class="sidebar-item" aria-label="设计图裁剪工具 - split"><!--[--><!--]--> 设计图裁剪工具 - split <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="pc-site-说明" tabindex="-1"><a class="header-anchor" href="#pc-site-说明" aria-hidden="true">#</a> pc-site 说明</h1><p>本项目为乐视网 PC 站。<br> 重构之前使用 jQuery 的旧项目，使用服务端渲染来达到更快的加载速度和更好的 SEO。</p><h3 id="技术栈" tabindex="-1"><a class="header-anchor" href="#技术栈" aria-hidden="true">#</a> 技术栈</h3><table><thead><tr><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>框架</td><td>Vue 3</td></tr><tr><td>CSS 预处理器</td><td>less</td></tr><tr><td>构建工具</td><td>vite</td></tr><tr><td>路由</td><td><a href="https://router.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">Vue Router<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td></tr><tr><td>状态管理器</td><td>没有使用 vuex，而是简单的 <a href="https://cn.vuejs.org/guide/scaling-up/state-management.html#what-is-state-management" target="_blank" rel="noopener noreferrer">状态管理<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td></tr><tr><td>重要插件</td><td><a href="https://antdv.com/components/overview-cn" target="_blank" rel="noopener noreferrer">ant-design-vue<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><br><a href="https://cn.vite-plugin-ssr.com/" target="_blank" rel="noopener noreferrer">vite-plugin-ssr<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td></tr></tbody></table><h3 id="ssr" tabindex="-1"><a class="header-anchor" href="#ssr" aria-hidden="true">#</a> SSR</h3><p>本项目最值得一说的就是 SSR 部分。<br> 服务端渲染可以加快访问速度，优化 SEO，是网站必需的能力。 一般的 SSR 都比较繁杂庞大，我这里基于 <a href="https://cn.vitejs.dev/" target="_blank" rel="noopener noreferrer">vite<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 和 <a href="https://cn.vite-plugin-ssr.com/" target="_blank" rel="noopener noreferrer">vite-plugin-ssr<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 开发了一套<strong>适合本项目</strong>的服务端渲染流程。 只需添加很小的一部分服务端代码，其余部分都和客户端渲染共用代码。</p><h4 id="基本流程" tabindex="-1"><a class="header-anchor" href="#基本流程" aria-hidden="true">#</a> 基本流程</h4><p>本项目的核心在 <code>/renderer</code> 文件夹内。</p><ul><li><code>_default.page.client.js</code> 仅负责客户端渲染；</li><li><code>_default.page.server.js</code> 仅负责服务端渲染；</li><li><code>app.js</code> 同时负责客户端渲染和服务端渲染。</li></ul><ol><li>先从 <code>_default.page.server.js</code> 中请求数据，这里根据路由匹配，所以要注意路由匹配的优先级，尽量和前端 router 里一致</li><li>数据分为 <code>PageData</code> 和 <code>CommonData</code>，分别是页面特有的数据和公共数据</li><li>获取到之后，放置在 <code>AllData</code> 里，通过插件的 api 传输到 <code>_default.page.client.js</code> 里</li><li><code>_default.page.client.js</code> 获取到数据之后，用 <code>vue</code> 的 <a href="https://cn.vuejs.org/api/application.html#app-provide" target="_blank" rel="noopener noreferrer">provide()<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 方法，注入到应用的所有后代元素里。</li><li>在业务组件中可以通过以下代码获取注入的数据</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useSSRContext<span class="token punctuation">,</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
   <span class="token comment">// ...</span>
   <span class="token comment">// 两个钩子可以不一致，比如只在客户端做的事，就没必要写在 serverPrefetch 里</span>
   <span class="token function">serverPrefetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 服务端特有的生命周期钩子，这里是给服务端渲染准备的</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>swiperList <span class="token operator">=</span> <span class="token function">useSSRContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>PageData<span class="token punctuation">;</span> <span class="token comment">// 这里是获取页面特有的数据，如果组件是公共数据，那么就获取 CommonData</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token doc-comment comment">/**
    * 客户端特有的生命周期钩子，这里是给客户端端渲染准备的，建议使用 beforeMount
    * 之前用 mounted，发现经常会出现水和失败的提示，导致页面加载两次，是因为 mounted 之前就用 data 里的数据渲染一遍了，还没来得及用服务端的数据，所以和 ssr 的内容不一致。
    */</span>
   <span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
       <span class="token keyword">this</span><span class="token punctuation">.</span>swiperList <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">&#39;AllData&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>PageData<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="其他亮点" tabindex="-1"><a class="header-anchor" href="#其他亮点" aria-hidden="true">#</a> 其他亮点</h3><ol><li><strong>线上环境</strong>添加了服务端获取客户端 cookie 的方式，因此可以在服务器调用用户信息接口、会员接口等敏感信息，这样访问页面的时候不会有&quot;未登录&quot;或者&quot;非会员&quot;的中间状态一闪而过。<br> 但是本地开发的时候还挺麻烦。如果用 vite 的一般模式启动，没有向服务器发送 cookie 的地方。<br> 有一个方法可以用 vite 的中间件模式启动，自定义一个服务器，向 ssr 的 render 发送请求页面时的 cookie，就能达成目标。</li><li>为方便调试和排查问题，服务端发出的请求都在客户端备份了一份，可通过 <code>window.__SSRR</code> 查找，里面存储了当前页面在服务端发出的请求的数组，只有在添加了特定的 url 参数才会生效，以免影响日常访问的 html 体积。</li><li>使用了 <code>pre-commit</code> 钩子，每次 commit 之前检测特定文件下第一行的图标链接是否为第三方链接，如果是第三方的，就调用脚本上传为公司自己的链接，来达成外部链接私有化的目的。</li></ol></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/ImSwordTooth/edit/main/pages/projects/pc-site.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/blog/pages/projects/deploy.html" class="" aria-label="可装配上线步骤的上线系统 - deploy"><!--[--><!--]--> 可装配上线步骤的上线系统 - deploy <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/blog/assets/app-rZSHgSAN.js" defer></script>
  </body>
</html>
